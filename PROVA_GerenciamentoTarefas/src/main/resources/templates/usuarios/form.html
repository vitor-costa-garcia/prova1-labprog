<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Usuário - Formulário</title>
    <link rel="stylesheet" th:href="@{/styles/task_form.css}">
    <link rel="stylesheet" th:href="@{/styles/home.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

<div class="container-home" th:id="${yearMonth}">
    <div class="home-header">
        <div style="display: flex;">
            <img class="home-logo-img" onclick="window.location.href='/home'" th:src="@{/images/TaskItLogo.png}" alt="TaskIt Logo!">
            <h3>Task-It !</h3>
        </div>
        <div class="home-header-buttons">
            <a class="btn btn-light" href="/home">Início</a>
            <a class="btn btn-light" href="/tarefas">Tarefas</a>
            <a class="btn btn-light" href="/usuarios">Usuários</a>
        </div>
    </div>
</div>
<h1 th:text="${usuario.getId()} != null ? 'Editor de usuários: Usuário ID ' + ${usuario.getId()} : 'Criador de Usuários'" class="form-tarefa-title"></h1>

<!-- Formulário de cadastro -->
<div class="container-form-tarefa">
    <form th:if="${usuario.getId()} == null" th:action="@{/usuarios}" method="post" th:object="${usuario}">
        <!-- Erros de validação -->
        <div class="form-failure-warning" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
        <div class="form-failure-warning" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        <label for="nome">Nome:</label>
        <input th:field="*{nome}" class="form-control" id="nome" type="text"><br>

        <label for="email">Email:</label>
        <input th:field="*{email}" class="form-control" id="email" type="text"><br>


        <div class="container-form-tarefa-buttons">
            <button type="submit" class="btn btn-success"  style="margin-right: 200px">Cadastrar</button>
            <a th:href="@{/usuarios}" class="btn btn-danger">Cancelar</a>
        </div>
    </form>
</div>

<!-- Formulário de edição -->
<div class="container-form-tarefa">
    <form th:if="${usuario.getId()} != null" th:action="@{/usuarios/{id}(id=${usuario.getId()})}" method="post" th:object="${usuario}">
        <!-- Erros de validação -->
        <div class="form-failure-warning" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
        <div class="form-failure-warning" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        <input type="hidden" name="_method" value="put"/>

        <label for="nome">Nome:</label>
        <input th:field="*{nome}" class="form-control" id="nome" type="text"><br>

        <label for="email">Email:</label>
        <input th:field="*{email}" class="form-control" id="email" type="text"><br>


        <div class="container-form-tarefa-buttons">
            <button type="submit" class="btn btn-primary" style="margin-right: 200px">Atualizar</button>
            <a th:href="@{/usuarios}" class="btn btn-danger">Cancelar</a>
        </div>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>

