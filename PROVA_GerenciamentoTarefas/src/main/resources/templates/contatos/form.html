<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cliente - Formulário</title>
</head>
<body>
<h1 th:text="${contato.id} != null ? 'Editar Cliente' : 'Novo Cliente'"></h1>

<!-- Formulário de cadastro -->
<form th:if="${contato.id} == null" th:action="@{/contatos}" method="post" th:object="${contato}">
    <label for="nome">Nome:</label>
    <input th:field="*{nome}" id="nome" type="text" required><br>

    <label for="email">Email:</label>
    <input th:field="*{email}" id="email" type="email" required><br>

    <label for="endereco">Endereço:</label>
    <input th:field="*{endereco}" id="endereco" type="text"><br>

    <!-- Erros de validação -->
    <div th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
    <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
    <div th:if="${#fields.hasErrors('endereco')}" th:errors="*{endereco}"></div>

    <button type="submit">Cadastrar</button>
    <a th:href="@{/contatos}">Cancelar</a>
</form>

<!-- Formulário de edição -->
<form th:if="${contato.id} != null" th:action="@{/contatos/{id}(id=${contato.id})}" method="post" th:object="${contato}">
    <input type="hidden" name="_method" value="put"/>

    <label for="nome">Nome:</label>
    <input th:field="*{nome}" id="nome" type="text" required><br>

    <label for="email">Email:</label>
    <input th:field="*{email}" id="email" type="email" required><br>

    <label for="endereco">Endereço:</label>
    <input th:field="*{endereco}" id="endereco" type="text"><br>

    <!-- Erros de validação -->
    <div th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
    <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
    <div th:if="${#fields.hasErrors('endereco')}" th:errors="*{endereco}"></div>

    <button type="submit">Atualizar</button>
    <a th:href="@{/contatos}">Cancelar</a>
</form>
</body>
</html>
